<html><head>
    <meta charset="utf-8">
    <link href="/static/build/styles/samples.37902ba3b7fe.css" rel="stylesheet" type="text/css">
    
    <style type="text/css">
        canvas {
            border: 1px solid black;
                cursor: pointer;
        }
        .tool{
                float: right;
        }
        input{
                margin-right: 30px;
        }
    </style>
    
    <title>Element: mousemove event - Examples - code sample</title>
</head>
<body>
        <h1>Drawing with mouse events</h1>
       
<canvas id="myPics" width="1150" height="500"></canvas>
<div class="tool">
        <input type="color" class="color">
        <input type="button" value='橡皮'>
</div>

<!-- <canvas id="myPics"></canvas> -->

    
    
        <script>
            // When true, moving the mouse draws on the canvas
let isDrawing = false;
let x = 0;
let y = 0;

const myPics = document.getElementById('myPics');
const context = myPics.getContext('2d');

// The x and y offset of the canvas from the edge of the page
const rect = myPics.getBoundingClientRect();
var color = document.querySelector('.color');

// Add the event listeners for mousedown, mousemove, and mouseup
myPics.addEventListener('mousedown', e => {
x = e.clientX - rect.left;
y = e.clientY - rect.top;
isDrawing = true;
});

myPics.addEventListener('mousemove', e => {
if (isDrawing === true) {
drawLine(context, x, y, e.clientX - rect.left, e.clientY - rect.top);
x = e.clientX - rect.left;
y = e.clientY - rect.top;
}
});

window.addEventListener('mouseup', e => {
if (isDrawing === true) {
drawLine(context, x, y, e.clientX - rect.left, e.clientY - rect.top);
x = 0;
y = 0;
isDrawing = false;
}
});

function drawLine(context, x1, y1, x2, y2) {
context.beginPath();
context.strokeStyle = color.value;
context.lineWidth = 1;
context.moveTo(x1, y1);
context.lineTo(x2, y2);
context.stroke();
context.closePath();
}
        </script>
    

</body></html>